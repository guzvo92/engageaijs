
FROM node:23
WORKDIR /app
RUN apt-get update && apt-get install -y --no-install-recommends nano curl bash && apt-get clean

# Configurar Bash como shell predeterminado
SHELL ["/bin/bash", "-c"]

# Configurar zona horaria
ARG TIMEZONE=America/New_York
ENV TZ=$TIMEZONE
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# Copiar archivos de configuración e instalar dependencias
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3800

# Iniciar Bash y ejecutar la aplicación
CMD ["bash", "-c", "npx ts-node src/index.ts"]
